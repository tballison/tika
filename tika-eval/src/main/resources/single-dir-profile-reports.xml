<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<reports>
    

<before>
        <!-- <sql>create index on x</sql>
-->    </before>
    

<report reportName="extractErrors"
            reportDirectory="reports"
            reportFilename="errors/extract_errors.csv"
            format="csv"
            encoding="UTF-16LE"
            includeSql="true">
        
<sql>
select file_path, extract_error_description
from extract_errors e
join containers c on c.container_id=e.container_id 
join ref_extract_error_types r on e.extract_error_type_id=r.extract_error_type_id;
</sql>
        

    </report>

<report reportName="parseErrors"
            reportDirectory="reports"
            reportFilename="errors/parse_errors.csv"
            format="csv"
            encoding="UTF-16LE"
            includeSql="true">
        
<sql>
select file_path, parse_error_description
from parse_errors p
join containers c on c.container_id=p.container_id 
join ref_parse_error_types r on p.parse_error_type_id=r.parse_error_type_id;
</sql>
        

    </report>

<report reportName="simpleReport"
            reportDirectory="reports"
            reportFilename="profiles/simpleReport.csv"
            format="csv"
            encoding="UTF-16LE"
            includeSql="true">
        

<sql>select 
ID,
CONTAINER_ID,
FILE_NAME,
MD5,
LENGTH,
IS_EMBEDDED,
p.FILE_EXTENSION,
mime_string as DETECTED_MIME,
m.FILE_EXTENSION as DETECTED_EXTENSION,
ELAPSED_TIME_MILLIS,
NUM_ATTACHMENTS,
NUM_METADATA_VALUES
 from profiles p
join mimes m on m.mime_type_id = p.mime_type_id
order by container_id, id
</sql>
        

<colformats>
            
<col name="LENGTH" type="numberFormatter">###,###</col>
</colformats>
    </report>
    
<report reportName="parseExceptionsByCount"
            reportDirectory="reports"
            reportFilename="parse_exceptions/parse_exceptions_by_count.csv"
            format="csv"
            encoding="UTF-16LE"
            includeSql="true">
        
<sql>
select sort_stack_trace, count(1) cnt
from parse_exceptions
group by sort_stack_trace
order by cnt desc
</sql>
        

    </report>

<report reportName="all_stack_traces"
            reportDirectory="reports"
            reportFilename="parse_exceptions/all_stack_traces.csv"
            format="csv"
            encoding="UTF-16LE"
            includeSql="true">
        
<sql>
select 
file_path, file_name, is_embedded,
mime_string as DETECTED_MIME,
orig_stack_trace, sort_stack_trace
from parse_exceptions e
left join profiles p on p.id = e.id
left join containers c on c.container_id=p.container_id
join mimes m on p.mime_type_id = m.mime_type_id
order by DETECTED_MIME, file_path
</sql>
        

    </report>

<report reportName="detectedMimesByCountAllFiles"
            reportDirectory="reports"
            reportFilename="mimes/all_mimes_by_count.csv"
            format="csv"
            encoding="UTF-16LE"
            includeSql="true">
        
<sql>
select mime_string as DETECTED_MIME_TYPE, count(1) as cnt
from profiles p
left join mimes m on m.mime_type_id=p.mime_type_id
group by DETECTED_MIME_TYPE
order by cnt desc
</sql>
        

    </report>


<report reportName="detectedMimesByCountContainerFiles"
            reportDirectory="reports"
            reportFilename="mimes/container_mimes_by_count.csv"
            format="csv"
            encoding="UTF-16LE"
            includeSql="true">
        
<sql>
select mime_string as DETECTED_MIME_TYPE, count(1) as cnt
from profiles p
left join mimes m on m.mime_type_id=p.mime_type_id
where is_embedded=false
group by DETECTED_MIME_TYPE
order by cnt desc
</sql>
        

    </report>

<report reportName="detectedMimesByCountEmbeddedFiles"
            reportDirectory="reports"
            reportFilename="mimes/embedded_mimes_by_count.csv"
            format="csv"
            encoding="UTF-16LE"
            includeSql="true">
        
<sql>
select mime_string as DETECTED_MIME_TYPE, count(1) as cnt
from profiles p
left join mimes m on m.mime_type_id=p.mime_type_id
where is_embedded=true
group by DETECTED_MIME_TYPE
order by cnt desc
</sql>
        

    </report>

<report reportName="contentsOverview"
            reportDirectory="reports"
            reportFilename="contents/contents_by_file.csv"
            format="csv"
            encoding="UTF-16LE"
            includeSql="true">
        
<sql>
select 
file_path, file_name, is_embedded,
content_length,
token_count, 
unique_token_count,
top_n_words,
lang_id_1,
lang_id_prob_1,
token_length_mean,
token_length_std_dev
from contents c
left join profiles p on c.id=p.id
left join containers r on r.container_id=p.container_id

</sql>
        

    </report>

<after>
        
<!--<sql>drop index on x</sql>
-->    </after>
</reports>