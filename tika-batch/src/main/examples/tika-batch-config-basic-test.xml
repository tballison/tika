<?xml version="1.0" encoding="UTF-8" standalone="no" ?>

<tika-batch-config
        maxAliveTimeSeconds="-1"
        pauseOnEarlyTerminationMillis="30000"
        staleThresholdMillis="180000" maxStaleConsumers="0"
        staleCheckPulseMillis="5000"
        maxQueueSize="10000" numConsumers="10">


    <!--
        Can also add startDir: this tells the crawler to start indexing a
        child directory of the inputDir directory.
    -->
    <crawler builderClass="org.apache.tika.batch.fs.builders.FSCrawlerBuilder"
             crawlOrder="random"
             maxFilesToAdd="-1"
             maxFilesToConsider="-1"
             maxFileSizeBytes="-1"
            />


    <!--
        This is an example of a crawler that reads a list of files to be processed from a
        file.  This assumes that the files in the list are relative to inputDir.
        <crawler builderClass="org.apache.tika.batch.fs.builders.FSCrawlerBuilder"
                 fileList="files.txt"
                 fileListEncoding="UTF-8"
                 maxFilesToAdd="-1"
                 maxFilesToConsider="-1"
                 includeFilePat="(?i).pdf$"
                 excludeFilePat="(?i).msg$"
                 maxFileSizeBytes="-1"
                 inputDir="input"
        />
    -->
    <consumers builderClass="org.apache.tika.batch.fs.builders.BasicTikaFSConsumersBuilder"
               recursiveParserWrapper="true">
        <parser class="org.apache.tika.batch.AutoDetectParserFactory" parseRecursively="true"/>
        <contenthandler builderClass="org.apache.tika.batch.builders.DefaultContentHandlerFactoryBuilder"
                        basicHandlerType="text" writeLimit="-1"/>

        <!-- overwritePolicy: "skip" a file if output file exists, "rename" a output file, "overwrite" -->
        <outputstream class="FSOutputStreamFactory" handleExisting="skip" outputDir="output"
                      encoding="UTF-8" outputSuffix="json"/>
    </consumers>

    <!-- reporter and interrupter are optional -->
    <reporter builderClass="org.apache.tika.batch.builders.SimpleLogReporterBuilder" sleepMillis="1000"
              staleThresholdMillis="500000"/>
    <interrupter builderClass="org.apache.tika.batch.builders.CommandLineInterrupterBuilder"/>
</tika-batch-config>
